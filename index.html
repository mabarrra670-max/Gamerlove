<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Love Clicker - Ultra World V7</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary: #ff0055;
            --secondary: #7000ff;
            --bg: #08090d;
            --card: rgba(255, 255, 255, 0.05);
            --gold: #ffd700;
        }

        * { box-sizing: border-box; font-family: 'Outfit', sans-serif; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; background-color: var(--bg); color: white; min-height: 100vh; overflow-x: hidden; }

        .app-container { width: 100%; max-width: 480px; margin: 0 auto; padding-bottom: 110px; }

        /* LIVE CHAT ENGINE 50+ VARIATIONS */
        #chat-container {
            position: fixed; bottom: 120px; left: 15px; right: 15px;
            height: 120px; overflow: hidden; z-index: 50; pointer-events: none;
            mask-image: linear-gradient(to top, black 75%, transparent 100%);
        }
        .chat-bubble {
            background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(15px);
            padding: 8px 14px; border-radius: 15px; margin-bottom: 6px;
            font-size: 10px; border-left: 3px solid var(--primary); width: fit-content;
            animation: chatSlide 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28) forwards;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        @keyframes chatSlide { from { opacity: 0; transform: translateX(-15px); } to { opacity: 1; transform: translateX(0); } }

        /* HEADER & TABS */
        .timer-header { background: rgba(255,255,255,0.03); border-bottom: 1px solid rgba(255,255,255,0.1); padding: 15px; text-align: center; font-size: 11px; font-weight: 800; color: var(--primary); letter-spacing: 1px; }
        .tab-content { display: none; padding: 15px; animation: fadeIn 0.4s ease; }
        .active-tab { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* PODIUM */
        .podium-box { display: flex; justify-content: center; align-items: flex-end; margin: 40px 0 20px; gap: 8px; }
        .p-unit { text-align: center; position: relative; flex: 1; }
        .p-img-box { width: 70px; height: 70px; border-radius: 50%; border: 3px solid #333; margin: 0 auto; overflow: hidden; background: #1a1a1a; }
        .rank-1 .p-img-box { width: 95px; height: 95px; border-color: var(--gold); box-shadow: 0 0 25px rgba(255,215,0,0.3); }
        .p-img-box img { width: 100%; height: 100%; object-fit: cover; }
        .prize-tag { font-size: 9px; font-weight: 800; color: var(--gold); margin-top: 4px; display: block; }
        
        /* LIST LEADERBOARD */
        .list-card {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            padding: 12px 15px; border-radius: 18px; display: flex; justify-content: space-between;
            align-items: center; margin-bottom: 10px;
        }
        .user-info { display: flex; align-items: center; gap: 12px; }
        .user-info img { width: 35px; height: 35px; border-radius: 50%; object-fit: cover; border: 1px solid #444; }
        .user-name { font-size: 12px; font-weight: 600; width: 130px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .user-score { font-weight: 800; color: var(--primary); font-size: 14px; }

        /* GAME */
        .score-val { font-size: 75px; font-weight: 800; text-align: center; margin: 10px 0; background: linear-gradient(#fff, #999); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        #click-btn { font-size: 100px; background: none; border: none; cursor: pointer; transition: 0.1s; display: block; margin: 0 auto; filter: drop-shadow(0 0 15px rgba(255,0,85,0.2)); }
        #click-btn:active { transform: scale(0.85); }
        .btn-action { width: 100%; padding: 18px; border-radius: 20px; border: none; font-weight: 800; cursor: pointer; margin-top: 10px; transition: 0.3s; }

        /* NAV */
        .bottom-nav { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 92%; max-width: 400px; background: rgba(10,10,15,0.95); backdrop-filter: blur(20px); display: flex; justify-content: space-around; padding: 14px; border-radius: 25px; border: 1px solid rgba(255,255,255,0.08); z-index: 100; }
        .nav-link { color: #444; text-align: center; cursor: pointer; font-size: 11px; flex: 1; }
        .nav-link.active { color: var(--primary); }

        input { width: 100%; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; color: white; margin-bottom: 10px; outline: none; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <div class="app-container">
        <div id="chat-container" class="hidden"></div>
        <div class="timer-header hidden" id="header-top">‚ö° RESET IN: <span id="timer">00:00:00</span></div>

        <div id="tab-login" class="tab-content active-tab">
            <div style="text-align:center; margin-top:80px;">
                <h1 style="font-size:35px; margin:0; letter-spacing:-1px;">LOVE<span style="color:var(--primary)">.</span>CLICKER</h1>
                <div style="background:var(--card); padding:30px; border-radius:30px; margin-top:30px; border:1px solid rgba(255,255,255,0.05);">
                    <input type="email" id="email" placeholder="Email">
                    <input type="password" id="pass" placeholder="Password">
                    <input type="text" id="uname" placeholder="Nama Panggilan">
                    <button class="btn-action" onclick="doLogin()" style="background:var(--primary); color:white;">MULAI BERMAIN</button>
                    <button onclick="doRegister()" style="background:none; border:none; color:#444; margin-top:20px; font-size:11px;">Belum punya akun? Daftar</button>
                </div>
            </div>
        </div>

        <div id="tab-game" class="tab-content">
            <p style="text-align:center; color:var(--primary); font-size:10px; font-weight:800; letter-spacing:2px; margin-top:20px;">CURRENT BALANCE</p>
            <div class="score-val" id="game-score">0</div>
            <div style="margin:40px 0;"><button id="click-btn">üíñ</button></div>
            <button class="btn-action" onclick="syncData()" style="background:white; color:black;">üíæ SIMPAN DATA KE CLOUD</button>
        </div>

        <div id="tab-winner" class="tab-content">
            <h3 style="text-align:center; letter-spacing:1px; margin-bottom:0;">WORLD RANKING</h3>
            <p style="text-align:center; font-size:10px; color:#444; margin-bottom:20px;">Top 50 Players</p>
            <div class="podium-box">
                <div class="p-unit rank-2">
                    <div class="p-img-box"><img src="" id="top2-img"></div>
                    <div style="font-size:10px; margin-top:10px;" id="top2-name">...</div>
                    <span class="prize-tag">Rp 100k</span>
                    <div style="font-size:11px; color:var(--primary); font-weight:800;" id="top2-coin">0</div>
                </div>
                <div class="p-unit rank-1">
                    <span style="position:absolute; top:-25px; left:50%; transform:translateX(-50%); font-size:25px;">üëë</span>
                    <div class="p-img-box"><img src="" id="top1-img"></div>
                    <div style="font-size:12px; margin-top:10px; font-weight:800;" id="top1-name">...</div>
                    <span class="prize-tag">Rp 1 Juta</span>
                    <div style="font-size:13px; color:var(--primary); font-weight:800;" id="top1-coin">0</div>
                </div>
                <div class="p-unit rank-3">
                    <div class="p-img-box"><img src="" id="top3-img"></div>
                    <div style="font-size:10px; margin-top:10px;" id="top3-name">...</div>
                    <span class="prize-tag">Rp 50k</span>
                    <div style="font-size:11px; color:var(--primary); font-weight:800;" id="top3-coin">0</div>
                </div>
            </div>
            <div id="list-container" style="max-height: 400px; overflow-y: auto;"></div>
        </div>

        <div id="tab-profile" class="tab-content">
            <div style="background:var(--card); padding:30px; border-radius:30px; text-align:center;">
                <div style="position:relative; display:inline-block; margin-bottom:15px;">
                    <img src="" id="my-pic" style="width:120px; height:120px; border-radius:50%; border:3px solid var(--primary); object-fit:cover;">
                    <label style="position:absolute; bottom:5px; right:5px; background:var(--primary); padding:8px; border-radius:50%; cursor:pointer;">
                        üì∏<input type="file" id="upload-pic" accept="image/*" style="display:none;">
                    </label>
                </div>
                <h2 id="my-name" style="margin:5px 0;">Player</h2>
                <div style="background:rgba(255,255,255,0.02); padding:20px; border-radius:20px; margin-top:20px;">
                    <span style="font-size:11px; color:#444;">SALDO KOIN</span><br>
                    <span style="font-size:24px; font-weight:800; color:var(--primary);" id="my-total-score">0</span>
                </div>
                <button onclick="auth.signOut(); location.reload();" style="background:none; border:1px solid #222; color:#ff4444; padding:12px 30px; border-radius:15px; margin-top:30px; cursor:pointer;">KELUAR AKUN</button>
            </div>
        </div>

        <div class="bottom-nav hidden" id="nav-bar">
            <div class="nav-link active" onclick="goTab('tab-game', this)">üéÆ<span>Game</span></div>
            <div class="nav-link" onclick="goTab('tab-winner', this)">üèÜ<span>Winner</span></div>
            <div class="nav-link" onclick="goTab('tab-profile', this)">üë§<span>Profil</span></div>
        </div>
    </div>

    <script>
        // --- CONFIG ---
        const firebaseConfig = {
          apiKey: "AIzaSyCyMnLJJo2QTZZ7cBGigtj0BNNfqjHngvU",
          authDomain: "loveclicker-86b7e.firebaseapp.com",
          projectId: "loveclicker-86b7e",
          storageBucket: "loveclicker-86b7e.firebasestorage.app",
          messagingSenderId: "219092692738",
          appId: "1:219092692738:web:e5eb08a2c0dd7b2cf59c1b",
          measurementId: "G-KM1GZ74EBN"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth(); const db = firebase.firestore();
        let userScore = 0; let activeUser = null; 
        let userImg = "https://cdn-icons-png.flaticon.com/512/3135/3135715.png";

        // --- 50 BOTS WITH RANDOM IMAGES ---
        const botNames = [
            "Siska Cantikk ‚ú®", "Budi_Jagoan", "Andi_Wijaya", "Putri_Lestari üíñ", "Kucing_Oren üêà", 
            "Kang_Bakso", "Dewi_Malam", "Riko_Simanjuntak", "Santi_Santuy", "Mawar_Hitam üåπ",
            "Dina_Imuttt", "Eko_Pratama", "Lina_Marlina", "Asep_Knalpot", "Indomie_Rebus üçú",
            "Mbak_Seblak", "Tukang_Bubur", "Agus_Kotak", "Siti_Aminah", "Rina_Cantik ‚ú®",
            "Bayu_Samudra", "Hantu_Koin üëª", "Dedi_Keren", "Maya_Sari", "Nina_Bucin",
            "Joko_Kendil", "Sari_Roti", "Fajar_Sadboy üò¢", "Bunga_Desa", "Kucing_Stress",
            "Radit_Ganteng", "Siska_Gemoy", "Wawan_Racing", "Ani_Suryani", "Tono_Listrik",
            "Putra_Petir ‚ö°", "Neng_Elis", "Abang_Gojek", "Bocil_Kematian", "Dewa_Clicker",
            "Ratu_Poin", "Si_Paling_Klik", "Tukang_Kayu", "Meme_Lover", "Zaky_Gamer",
            "Vina_Kawai", "Rizky_Febian", "Sule_Prik", "Andre_Taulany", "Mister_Bean"
        ];

        let botDatabase = botNames.map((name, index) => ({
            name: name,
            score: Math.floor(Math.random() * 15000) + 500,
            photo: `https://picsum.photos/150?random=${index}`
        }));

        // --- 50 LIVE CHAT MESSAGES ---
        const chatPool = [
            "Gas poll koinnya!", "Poin gue disalip siska :(", "Gila rank 1 kenceng amat!", "Semangat pejuang hadiah!",
            "Info dana kaget dong", "Baru klik 100 udah pegel", "Gue bakal jadi juara 1!", "Mantap gamenya",
            "Kapan reset hadiahnya?", "Laper pengen seblak", "Halo semua!", "Ada yang dari Jakarta?",
            "Semangat klik kawan", "Hampir tembus 10k!", "Otw ranking atas", "Admin bagi bonus woi",
            "Kucing gue ikut main wkwk", "Lagi kerja sambil klik", "Sumpah nagih banget", "Poin gue ilang satu!",
            "Jangan lupa save koinnya", "Rank 50 juga gapapa", "Bismillah menang 1 juta", "Siapa yang paling jago?",
            "Tangan gue tremor", "Baru bangun langsung klik", "Siska cantik banget fotonya", "Gue ranking berapa ya?",
            "Mabar yuk!", "Koin gue udah 5000", "Semangat terus pantang menyerah", "Hari ini cerah ya",
            "Lagi nunggu reset", "Ada yang tau cara cepet?", "Klik terus sampe hp panas", "Mantul abis!",
            "Gaskeun lur!", "Wih koinnya banyak amat", "Iri bilang bos!", "Salut sama rank 1",
            "Jangan lupa makan ya", "Poin meluncurrrr", "Asik dapet ranking", "Gue bakal nyalip budi",
            "Dikit lagi tembus!", "Horeee naik peringkat", "Capek tapi seru", "Info reset jam berapa?",
            "Siapa nih yang juara?", "Gaskeun kawan-kawan!"
        ];

        function startChat() {
            setInterval(() => {
                const b = document.createElement('div'); b.className = 'chat-bubble';
                const name = botNames[Math.floor(Math.random()*botNames.length)];
                const msg = chatPool[Math.floor(Math.random()*chatPool.length)];
                b.innerHTML = `<span style="color:var(--primary); font-weight:800">${name}:</span> ${msg}`;
                document.getElementById('chat-container').appendChild(b);
                if(document.getElementById('chat-container').children.length > 4) document.getElementById('chat-container').removeChild(document.getElementById('chat-container').firstChild);
            }, 3000);
        }

        function goTab(id, el) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active-tab'));
            document.querySelectorAll('.nav-link').forEach(n => n.classList.remove('active'));
            document.getElementById(id).classList.add('active-tab'); el.classList.add('active');
            if(id === 'tab-winner') {
                fetchLeaderboard();
                confetti({ particleCount: 120, spread: 80, origin: { y: 0.6 }, colors: ['#ff0055', '#ffd700', '#7000ff'] });
            }
        }

        auth.onAuthStateChanged(user => {
            if (user) {
                activeUser = user;
                document.getElementById('tab-login').classList.remove('active-tab');
                document.getElementById('tab-game').classList.add('active-tab');
                document.getElementById('nav-bar').classList.remove('hidden');
                document.getElementById('header-top').classList.remove('hidden');
                document.getElementById('chat-container').classList.remove('hidden');
                loadData(); startChat();
            }
        });

        document.getElementById('click-btn').onclick = () => { userScore++; document.getElementById('game-score').innerText = userScore; };

        async function loadData() {
            const doc = await db.collection("users").doc(activeUser.uid).get();
            if (doc.exists) {
                const d = doc.data(); userScore = d.score || 0; userImg = d.photo || userImg;
                document.getElementById('game-score').innerText = userScore;
                document.getElementById('my-total-score').innerText = userScore;
                document.getElementById('my-name').innerText = d.name;
                document.getElementById('my-pic').src = userImg;
            }
        }

        async function syncData() {
            await db.collection("users").doc(activeUser.uid).set({ name: document.getElementById('my-name').innerText, score: userScore, photo: userImg }, { merge: true });
            alert("DATA DISINKRONKAN!");
        }

        async function fetchLeaderboard() {
            const snap = await db.collection("users").orderBy("score", "desc").limit(50).get();
            let players = []; snap.forEach(d => players.push({...d.data(), isBot: false}));
            
            let all = [...players, ...botDatabase].sort((a,b) => b.score - a.score);
            const def = "https://cdn-icons-png.flaticon.com/512/3135/3135715.png";
            
            if(all[0]) { document.getElementById('top1-img').src = all[0].photo || def; document.getElementById('top1-name').innerText = all[0].name; document.getElementById('top1-coin').innerText = all[0].score + " ü™ô"; }
            if(all[1]) { document.getElementById('top2-img').src = all[1].photo || def; document.getElementById('top2-name').innerText = all[1].name; document.getElementById('top2-coin').innerText = all[1].score + " ü™ô"; }
            if(all[2]) { document.getElementById('top3-img').src = all[2].photo || def; document.getElementById('top3-name').innerText = all[2].name; document.getElementById('top3-coin').innerText = all[2].score + " ü™ô"; }

            let h = "";
            for(let i=0; i<all.length; i++) {
                h += `<div class="list-card">
                    <div class="user-info">
                        <span style="font-size:10px; font-weight:800; color:#333; width:25px;">#${i+1}</span>
                        <img src="${all[i].photo || def}">
                        <span class="user-name">${all[i].name}</span>
                    </div>
                    <span class="user-score">${all[i].score} ü™ô</span>
                </div>`;
            }
            document.getElementById('list-container').innerHTML = h;
        }

        document.getElementById('upload-pic').addEventListener('change', function(e) {
            const f = e.target.files[0]; const r = new FileReader();
            r.onloadend = () => { userImg = r.result; document.getElementById('my-pic').src = userImg; };
            if(f) r.readAsDataURL(f);
        });

        function doLogin() { auth.signInWithEmailAndPassword(document.getElementById('email').value, document.getElementById('pass').value); }
        function doRegister() {
            const n = document.getElementById('uname').value;
            auth.createUserWithEmailAndPassword(document.getElementById('email').value, document.getElementById('pass').value).then(u => {
                db.collection("users").doc(u.user.uid).set({name: n, score: 0, photo: userImg});
            });
        }

        setInterval(() => {
            const d = new Date(); const t = new Date(d.getFullYear(), d.getMonth(), d.getDate() + 1);
            const diff = t - d; const h = Math.floor(diff/3600000); const m = Math.floor((diff%3600000)/60000); const s = Math.floor((diff%60000)/1000);
            document.getElementById('timer').innerText = `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
            botDatabase.forEach(b => b.score += Math.floor(Math.random()*4));
        }, 1000);
    </script>
</body>
    </html>
